<!DOCTYPE html>
<html>

	<!-- HEAD -->
	<%- include('./partials/head.ejs') %>
	
<body>

	<!-- HEADER -->
	<header>
		<h2><%= title %></h2>

		<ul>
			<li>
				<a href="/">Home</a>
			</li>
			<li>
				<a href="../about-us">About Us</a>
			</li>
			<li>
				<a href="../posts">All Posts</a>
			</li>
			<li>
				<a href="../add-post">New Post</a>
			</li>
			<li>
				<a href="../edit-posts">Edit Post</a>
			</li>
			<li>
				<a href="../contacts">Contacts</a>
			</li>
		</ul>
	</header>
	<h2 class="title-page"><%= title %></h2>

	<!-- ARTICLE -->
	<article class="post">
		<div>
			<span>
				<%= post.createdAt.toLocaleDateString() || 'No date' %>, 
			</span>
			<span>
				<%= post.author %>
			</span>
		</div>
		<h2>
			<%= post.title %>
		</h2>
		<p>
			<%= post.text %>
		</p>

		<!--
		<a href="/edit/<%= post.id %>">Редактировать</a>

		<button data-id="<%= post.id %>">
			<span data-id="<%= post.id %>"> Удалить </span>
		</button>
		-->
	</article>

	<script>
		document.addEventListener('click', (e) => {
			const id = e.target?.dataset?.id || null;
			if (id) {
				fetch(`/posts/${id}`, {
				method: 'DELETE',
				}).then(() => {
				window.location.href = '/posts';
				});
			}
		});
	</script>
</body>
</html>